---
title: "Example for XMInt"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Example for XMInt}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This package conducts the model selection for multivariate mediation analysis involving exposure by mediator interaction.

## Installation

Users may need to install gfortran before installing our package. Detailed installation instructions can be found at https://gcc.gnu.org/wiki/GFortranBinaries.

```{r setup, message=FALSE,warning=FALSE}
## install package
#library(devtools)
#install_github("ruiyangli1/XMInt")

## load package
library(XMInt)
```

## Example 

### Data generation

Example data (exposure X, outcome Y, and potential mediators M) was generated as follows. 

For each subject $i = 1, ..., N$:

* $X_i \stackrel{i.i.d}{\sim} N(0, 1)$
* $M_{i,v} = a_v X_i + e{1_{i,v}}$, where $e_{1_{i,v}} \stackrel{i.i.d}{\sim} N(0, 1), v = 1, ..., V$
* $Y_i = X_i + \sum_v b_{1_{i,v}} M_{i,v} + \sum_v b_{2_{i,v}} X_i \times M_{i,v} + e_{2_{i,v}}$, where $e_{2_{i,v}} \stackrel{i.i.d}{\sim} N(0, 1)$

The first three M variables ($M_1,M_2,M_3$) are set to be the true mediators (i.e., having non-zero $a$ and $b_1$ coefficients), $X \times M_1$ is set to be the true exposure-by-mediator interaction term (i.e., having non-zero $b_2$ coefficients), and all other coefficients are set to be 0.

```{r}
## data generation
data = dat_gen(N = 200, V = 100, es = 1)
X = data$X; Y = data$Y; M = data$M
```

### Model selection
```{r}
## select model
result = XMInt_select(X,Y,M)
```

### Results
```{r}
## selected mediator(s)
result$selected_mediator
## selected interaction(s)
result$selected_interaction 
```

